# Oracle Identity Cloud Service's Authentication API Payload Contract Details

The SSO Authentication APIs for Oracle Identity Cloud Service REST client samples contain a collection of sample REST API requests that can be used with clients such as [Postman](http://getpostman.com) to make test calls to Oracle Identity Cloud Service. 

This document describes the payload contract details for the Authentication APIS for Oracle Identity Cloud Service.

## Payload Contract Details

This table lists the payload contract details for the Authentication APIs for Oracle Identity Cloud Service.

 |Attribute     |Used in Request/Response |Supported Values/Sample Values               |Multi-Valued |Related attr |Use Details                      |
 |--------------|-------------------------|---------------------------------------------|-------------|-------------|---------------------------------|
 | **nextOp**    | Response                 |<ul><li>credSubmit: Factor credentials must be submitted in the next request.</li><li>enrollment: Starts the enrollment process.</li><li>getBackupFactors: Requests a list of all enrolled factors for a user.</li><li>createToken: Authentication (first level and MFA) is complete.<br>The client can choose to stop the enrollment and request an authToken in the next request.</li><li>resentCode: Used when the client wants the server to send the OTP again (SMS and EMAIL factors).</li><li>createSession: Informs the SDK to create the session after the required authentication is complete.<br>When createToken is present as one of the nextOps, createSession is also included.<br>The createSession attribute value works as a shortcut to directly get the session, without procuring the authnToken.</li></ul>| True |Op: The value of the **nextOp** attr provided in the server response should be substituted for the "op" attr in the next client request. | The nextOp attribute is a list of operations that can be executed by the client. The first op in the list is the next operation that the client is "advised" to select. If the client uses any other option, an extra call must be made to the server to get details of the nextOp. For Example: After enrolling in one factor, the server replies with nextOp as [**createToken,** **enrollment,** **createSession**]. It also sends all of the information needed by the client to complete the createToken request. However, if the client chooses enrollment, the client must make an extra call to get the details of which factors are available for enrollment and what credentials should be passed. |
 | **op**        | Request                  |<ul><li>credSubmit</li><li>enrollment</li><li>getBackupFactors</li><li>createToken</li><li>resendCode</li><li>createSession</li></ul> | False | One of the values of **nextOp** from the previous server response. | It indicates the operation that the client wants to perform.|
 | **nextAuthFactors**| Resonse |<ul><li>SMS</li><li>TOTP</li><li>BYPASSCODE</li><li>EMAIL</li><li>PUSH</li><li>SECURITY_QUESTIONS</li><li>USERNAME_PASSWORD</li> | True | **authFactor** The **authFactor** attr in the client request should use one of the values of the **nextAuthFactors** from the previous server response. | Lists all of the factors that are applicable to the current context. The client must choose one of these values for enrolling or authenticating in the next request.|
 |**authFactor** | Request                  |<ul><li>SMS</li><li>TOTP</li><li>BYPASSCODE</li><li>EMAIL</li><li>PUSH</li><li>SECURITY_QUESTIONS</li><li>USERNAME_PASSWORD</li></ul> | False | One of the values of **nextAuthFactors** from the previous server response. | It indicates which factor the client wants to enroll/authenticate for.|
 | **credentials** | Request/Response | See the **Credentials Types and Description** table in<br> the Authentication API MFA Factors and Credentials ReadMe file. | False | None |<ul><li>When present in the response, it indicates that the list of credentials that the server expects for a given authFactor</li><li>When present in the request, it is used by the client to submit credentials for a given authFactor during enrollment or authentication.</li></ul>|
 | **status**    | Response                 |<ul><li>success: the operation succeeded.</li><li>failed: This value also contains the "cause" object with error details.</li><li>pending: This value also contains the "cause" object with error details.</li></ul> | False | None |**Pending** status is typically used in the case of plling, where the server hasn't received confirmation from the OMA App while using TOTP and PUSH factors.|
 |**trustedDeviceSettings**| Response         | "trustedDeviceSettings":{"trustedDurationInDays":15}| False | None | Indicates that the trust feature is enabled for this tenant. If the tenant has disabled this setting or if the user has reached the max limit of trusted devices, this setting is missing. |
 |**requestState**| Request/Response         | Data encrypted using the Tenant key. | NA | None | Contains the context/request related details (encrypted using tenant key), which needs to be passed back and forth between the server and the client. This contains details that the server needs, but the client doesn't need to know about. It typically contains:<ul><li>deviceId</li><li>requestId</li><li>authFactor</li><li>enrollmentType = MFA</li><li>expiryTime of the request</li></ul>|
 |**secQuesSettings**|Response| "secQuesSettings":<br>{"minAnswerLength":6,<br>"maxFieldLength":50,<br>"numQuestionsToAns":2,<br>"numQuestionsToSetup":2<br>}|False|None|Attributes that are required by the client during credential collection are included. For example, The number of security questions to be answered, the minimum answer length, and so on.|
 |**mfaSettings**| Response                 |"mfaSettings":<br>{"enrollmentRequired":true}|False|  | Indicates to the client if MFA enrollment is optional or required.|
 |**authnToken**  | Response                 | A JWT Token | False | None | The presence of this token indicates that authentication was successful. The client can now redirect the user to the protected application because authentication has  been verified by Oracle Identity Cloud Service.|
 |**displayName**| Response                 | "displayName":"John's Phone" | False | None | This is the default display name for the device that was created during enrollment or the device being used for authentication. When using the EMAIL factor, this is the emailId.|
 |**TOTP**       | Response                 | "TOTP":{<br>"qrcode":{<br>"imageData":"iVBORw0KGgoAAAANQmCC",<br>"imageType":"png/jpeg/jpg",<br>"content":"otpauth://totp/john?issuer=cisco&period=30&algorithm=SHA1&digits=6&RSA=SHA256withRSA<br>&Deviceid=f2bb8e8f832f4c084cf6c9493f7d346<br>&RequestId=9cdac2f7-2d57-4d40-a805-048b3cd9299<br>&secret=LOZB244F7AOUNCSK&ServiceType=TOTP&<br>KeyPairLength=2048&SSE=Base32"},<br>"credentials":["otpCode"]<br>}|False| None | This contains all of the information that is relevant to the TOTP factor needed for enrollment:<ul><li>Credentials: These must be submitted by the client to authenticate or enroll in a TOTP factor.<br> The credential attributes mentioned in the server response are sent in the next client request with appropriate values.</li><li>QrCode: This is sent during enrollment and contains the qr code information in plain text and base64 encoded image data, which needs to be rendered by the client.</li></ul>|
 |**SMS**        | Response                  |"SMS":{"credentials":["phonenumber"]},|False|None| This contains all of the credentials that must be submitted by the client to authenticate/enroll in the SMS factor. The credentials mentioned in this server response are sent in the next client request with the appropriate values.|
 |**SECURITY_QUESTIONS**| Response             |"SECURITY_QUESTIONS":{<br>"secQuesSettings":{<br>"minAnswerLength":6,<br>"maxFieldLength":50,<br>"numQuestionsToAns":2,<br>"numQuestionsToSetup":2},<br>"securityQuestions":[<br>{"questionId":"FavoriteToy","text":"What is your favorite toy?"},<br>{"questionId":"FavoriteMovie","text":"What's your favorite movie?"}<br>],<br>"credentials":[questionId","answer","hint"]<br>}|False|None|This contains the settings and the list of security questions enabled by the tenant that can be used for enrollment. The question text is in the Accept Language locale.|
 |**PUSH**       | Response                  | "PUSH":{<br>"qrcode":{<br>"imageData":"iVBORw0KGgoAAAANSUhEUgAAASuQmCC",<br>"imageType":"png/jpeg,jpg",<br>"content":"otpauth://totp/john?issuer=tenant1&period=30&algorithm=SHA1&digits=6<br>&RSA=SHA256withRSA&\r\nDeviceid=bf3837107a3f4cebaefdd45eeddc414a<br>&RequestId=fd037b7a-1a7f-470d-84ac932301c&LoginURL=http%3A%2F%2Ftenant1.idcs.internal.oracle.com%3A8990%2F<br>sso%2Fv1%2F&OTP=eyJraWQiOiJiDIu&ServiceType=TOTP%2BPUSH<br>&KeyPairLength=2048&SSE=Base32"}<br>}|False|NA| This contains all of the information relevant to the PUSH factor needed for enrollment.<ul><li>Credentials: These must be submitted by the client to authenticate or enroll in the PUSH factor.<br> The credential attributes mentioned in this server response are sent in the next client request with the appropriate values.</li><li>QrCode: This is sent during enrollment and contains the qr code information in plain text and base64 encoded image data, which needs to be rendered by the client.</li></ul>|